!function(a,b,c,d){function e(b){this.settings=a.extend({},g,b),this.element=a(this.settings.content),this.id=this.settings.id,this._defaults=g,this._name=f,this.init()}var f="erpPopup",g={title:"",content:"",id:"",button:"Submit",extraClass:"",onReady:function(){},onSubmit:function(){},beforeClose:function(){}};a.extend(e.prototype,{init:function(){this.show_modal(),this.bindEvents()},bindEvents:function(){a("form.erp-modal-form","#"+this.settings.id).on("submit",a.proxy(this.formSubmit,this)),a(".erp-modal-backdrop, .erp-modal .close").on("click",a.proxy(this.closeModal,this)),a("body").on("keydown","#"+this.id,a.proxy(this.onEscapeKey,this)),a("#"+this.id).focus()},formSubmit:function(b){b.preventDefault(),a(".erp-modal-backdrop, .erp-modal").find(".erp-loader").removeClass("erp-hide"),this.settings.onSubmit.call(a(b.currentTarget),this)},show_modal:function(){if(""!==this.id&&!a("#"+this.id).length){var b=a("#erp-modal").find(".erp-modal"),c=b.clone();""!==this.settings.extraClass&&c.addClass(this.settings.extraClass),c.attr("id",this.id),c.attr("tabindex",-1),c.addClass("erp-count-class"),c.find("h2").text(this.settings.title),""===this.settings.button?c.find("footer").remove():c.find(".button-primary").text(this.settings.button),c.find(".content").empty().html(this.settings.content),c.show(),a("body").append(c);var d=600*a("body").find(".erp-count-class").length,e=d-1;a("#"+this.id).css("z-index",d),a("#"+this.id).after('<div style="z-index: '+e+'" class="erp-modal-backdrop '+this.id+'"></div>'),a("."+this.id).show(),this.settings.onReady.call(c,this)}},onEscapeKey:function(a){27===a.keyCode&&this.closeModal(a)},disableButton:function(){a("button[type=submit]",".erp-modal").attr("disabled","disabled")},enableButton:function(){a("button[type=submit]",".erp-modal").removeAttr("disabled")},closeModal:function(b){"undefined"!=typeof b&&b.preventDefault(),a(".erp-modal-backdrop, .erp-modal").find(".erp-loader").addClass("erp-hide"),this.settings.beforeClose.call(!1,this),a("#"+this.id).remove(),a("."+this.id).remove()},showError:function(b){a(".erp-modal-backdrop, .erp-modal").find(".erp-loader").addClass("erp-hide"),alert(b)}}),a.erpPopup=function(a){new e(a)}}(jQuery,window,document);