!function(y){"use strict";var a,w={initialize:function(){var t=this;y(".erp-hr-leave-policy").on("click","a.submitdelete",t,this.policy.remove),y("body").on("change","#erp-hr-leave-req-from-date, #erp-hr-leave-req-to-date",t,this.leave.requestDates),this.leave.setPolicy(),y("body").on("change","#erp-hr-leave-req-employee-id",t,this.leave.setPolicy),y("body").on("change",".new-leave-request-form .f_year, .erp-hr-leave-request-new .f_year",t,this.leave.setPolicy),y("body").on("change","#erp-hr-leave-req-leave-policy",t,this.leave.setAvailableDays),y(".hrm-dashboard").on("click",".erp-hr-new-leave-request-wrap a#erp-hr-new-leave-req",this.leave.takeLeave),y(".erp-employee-single").on("submit","form#erp-hr-empl-leave-history",this.leave.showHistory),y(".entitlement-list-table").on("click","a.submitdelete",t,this.entitlement.remove),y(".erp-hr-holiday-wrap").on("click","a#erp-hr-new-holiday",t,this.holiday.create),y(".erp-hr-holiday-wrap").on("click",".erp-hr-holiday-edit",t,this.holiday.edit),y(".erp-hr-holiday-wrap").on("click",".erp-hr-holiday-delete",t,this.holiday.remove),y(".erp-hr-holiday-wrap").on("click","a#erp-hr-import-holiday",t,this.holiday.import),y("body").on("change",".erp-hr-holiday-date-range",t,this.holiday.checkRange),y("body").on("dblclick","#erp-hr-holiday-data input",function(){y(this).removeAttr("readonly"),y(this).removeAttr("onfocus")}),y("body").on("click","#erp-hr-import-ical",t,this.importICalInit),y(".erp-hr-holiday-wrap").on("change","#erp-ical-input",t,this.uploadICal),y(".erp-hr-leave-requests").on("click",".erp-hr-leave-approve-btn",t,this.leave.approve),y(".erp-hr-leave-requests").on("click",".erp-hr-leave-reject-btn",t,this.leave.reject),y(".request-list-table").on("click","a.submitdelete",t,this.leave.remove),y("#filter_year").on("change",t,this.customFilterLeaveReport),y("#filter_leave_year").on("change",t,this.customLeaveFilter),y("#custom-date-range-leave-filter").on("change","#end_date",t,this.customLeaveFilterEndData),y(".input-component").on("keyup","#employee_name",function(e){clearTimeout(a);y(this).val();a=setTimeout(function(){t.searchEmployee()},500)}),y(".input-component").on("click",".list-employee-name",t,this.setEmployee),y("#wperp-filter-dropdown").on("change","#financial_year",t,this.setLeavePolicy),y('input[name="end"], input[name="start"]').on("change",t,this.checkDateRange),y(".leave-entitlement-form").on("change","#assignment_to",t,this.entitlement.hideEmployee),y(".leave-entitlement-form#assignment_to").change(),this.entitlement.getLeavePolicies(),y(".leave-entitlement-form").on("change",".change_policy",t,this.entitlement.getLeavePolicies),y(".leave-entitlement-form").on("change","#leave_policy",t,this.entitlement.getFilteredEmployee),this.leaveType.initActions(),y("#erp-hr-leave-type-create").on("submit",w.leaveType.create),this.initDateField()},initToggleCheckbox:function(){var a=!1;y("tbody").children().children(".check-column").find(":checkbox").click(function(e){if("undefined"==e.shiftKey)return!0;if(e.shiftKey){if(!a)return!0;checks=y(a).closest("form").find(":checkbox").filter(":visible:enabled"),first=checks.index(a),last=checks.index(this),checked=y(this).prop("checked"),0<first&&0<last&&first!=last&&(sliced=last>first?checks.slice(first,last):checks.slice(last,first),sliced.prop("checked",function(){return!!y(this).closest("tr").is(":visible")&&checked}))}var t=y(a=this).closest("tbody").find(":checkbox").filter(":visible:enabled").not(":checked");return y(this).closest("table").children("thead, tfoot").find(":checkbox").prop("checked",function(){return 0===t.length}),!0}),y("thead, tfoot").find(".check-column :checkbox").on("click.wp-toggle-checkboxes",function(e){var t=y(this),a=t.closest("table"),r=t.prop("checked"),i=e.shiftKey||t.data("wp-toggle");a.children("tbody").filter(":visible").children().children(".check-column").find(":checkbox").prop("checked",function(){return!y(this).is(":hidden,:disabled")&&(i?!y(this).prop("checked"):!!r)}),a.children("thead,  tfoot").filter(":visible").children().children(".check-column").find(":checkbox").prop("checked",function(){return!i&&!!r})})},initDateField:function(){y(".erp-leave-date-field").datepicker({dateFormat:"yy-mm-dd",changeMonth:!0,changeYear:!0}),y(".erp-leave-date-picker-from").datepicker({dateFormat:"yy-mm-dd",changeYear:!0,changeMonth:!0,numberOfMonths:1,onClose:function(e){y(".erp-leave-date-picker-to").datepicker("option","minDate",e)}}),y(".erp-leave-date-picker-to").datepicker({dateFormat:"yy-mm-dd",changeMonth:!0,changeYear:!0,numberOfMonths:1,onClose:function(e){y(".erp-leave-date-picker-from").datepicker("option","maxDate",e)}}),y(".erp-leave-datetime-picker-from").datetimepicker({dateFormat:"yy-mm-dd",timeFormat:"HH:mm:ss",changeYear:!0,changeMonth:!0,numberOfMonths:1,onClose:function(e){y(".erp-leave-datetime-picker-to").datetimepicker({dateFormat:"yy-mm-dd",timeFormat:"HH:mm:ss",timeInput:!0,minDate:e});var t=y(this).parent().parent().data("id"),a=new Date(y(this).val().trim()),r=new Date(y(this).closest("td").next("td").find("input").val().trim()),i=Math.round((r-a)/1e3/3600/24),n=1<i?" days":" day";y("#duration-"+t).html(i+n)}}),y(".erp-leave-datetime-picker-to").datetimepicker({dateFormat:"yy-mm-dd",timeFormat:"HH:mm:ss",timeInput:!0,changeMonth:!0,changeYear:!0,numberOfMonths:1,onClose:function(e){y(".erp-leave-datetime-picker-from").datetimepicker({dateFormat:"yy-mm-dd",timeFormat:"HH:mm:ss",timeInput:!0,maxDate:e});var t=y(this).parent().parent().data("id"),a=new Date(y(this).val().trim()),r=new Date(y(this).closest("td").prev("td").find("input").val().trim()),i=Math.round((a-r)/1e3/3600/24),n=1<i?" days":" day";y("#duration-"+t).html(i+n)}}),y(".erp-color-picker").wpColorPicker()},holiday:{checkRange:function(){y('input[name="range"]').is(":checked")?y('input[name="end_date"]').closest(".row").show():y('input[name="end_date"]').closest(".row").hide()},create:function(t){t.preventDefault(),y.erpPopup({title:wpErpHr.popup.holiday,button:wpErpHr.popup.holiday_create,id:"erp-hr-holiday-create-popup",content:wperp.template("erp-hr-holiday-js-tmp")({data:null}).trim(),extraClass:"smaller",onReady:function(){w.initDateField(),w.holiday.checkRange(),w.initToggleCheckbox()},onSubmit:function(e){t.data.holiday.submit.call(this,e,"add")}})},edit:function(t){t.preventDefault();var e=y(this);y.erpPopup({title:wpErpHr.popup.holiday,button:wpErpHr.popup.holiday_update,id:"erp-hr-holiday-create-popup",content:wperp.template("erp-hr-holiday-js-tmp")({data:null}).trim(),extraClass:"smaller",onReady:function(){w.initDateField(),w.holiday.checkRange();var n=this;y("header",n).after(y('<div class="loader"></div>').show()),wp.ajax.send("erp-hr-get-holiday",{data:{id:e.data("id"),_wpnonce:wpErpHr.nonce},success:function(e){y(".loader",n).remove();var t=e.holiday;y("#erp-hr-holiday-title",n).val(t.title),y("#erp-hr-holiday-start",n).val(t.start),y("#erp-hr-holiday-end",n).val(t.end),y("#erp-hr-holiday-id",n).val(t.id),y("#erp-hr-holiday-description",n).val(t.description),y("#erp-hr-holiday-action",n).val("erp_hr_holiday_create");var a=new Date(t.start),r=new Date(t.end),i=Math.abs(r.getTime()-a.getTime());0<Math.ceil(i/864e5)&&(y("#erp-hr-holiday-range").attr("checked","checked"),y("#erp-hr-holiday-range").trigger("change"))}})},onSubmit:function(e){t.data.holiday.submit.call(this,e)}})},remove:function(e){e.preventDefault();var t=y(this);confirm(wpErpHr.delConfirmHoliday)&&wp.ajax.send("erp-hr-holiday-delete",{data:{_wpnonce:wpErpHr.nonce,id:t.data("id")},success:function(){y(".list-table-wrap").load(window.location.href+" .list-wrap-inner")},error:function(e){alert(e)}})},submit:function(r,e){if("import"===e){var t=w.holiday,a=t.parseInputArray(y(this),'input[name="title[]"]'),i=t.parseInputArray(y(this),'input[name="start[]"]'),n=t.parseInputArray(y(this),'input[name="end[]"]'),o=t.parseInputArray(y(this),'input[name="description[]"]'),l=y(this).find('input[name="_wp_http_referer"]').val(),p=y(this).find('input[name="action"]').val(),c=y(this).find('input[name="_wpnonce"]').val(),s=y(this).find("#holiday_import_warning"),d=s.find(".done_count"),h=a.length,u=0;s.removeClass("erp-hide"),s.find(".total_count").text(h);for(var m=0;m<h;m+=30){var v=new FormData;v.append("_wpnonce",c),v.append("action",p),v.append("_wp_http_referer",l);for(var f=0;f<30&&!(f+m>=a.length);f++)v.append("title[]",a[f+m]),v.append("start[]",i[f+m]),v.append("end[]",n[f+m]),v.append("description[]",o[f+m]);wp.ajax.send({data:v,processData:!1,contentType:!1,success:function(a){y(".list-table-wrap").load(window.location.href+" .list-wrap-inner",function(){if(w.initDateField(),w.initToggleCheckbox(),u+=30,d.text(Math.min(u,h)),y("#holiday_msg").html(a),h<=u){s.addClass("erp-hide");var e=y("#holiday_msg div p"),t=e.text();t=t.replace(/\d+/g,h),e.text(t),r.closeModal()}})},error:function(e){r.enableButton(),r.showError(e)}})}0===h&&setTimeout(function(){r.closeModal()},300)}else wp.ajax.send({data:this.serializeObject(),success:function(e){r.closeModal(),y(".list-table-wrap").load(window.location.href+" .list-wrap-inner",function(){w.initDateField(),w.initToggleCheckbox(),y("#holiday_msg").html(e)})},error:function(e){r.enableButton(),r.showError(e)}})},import:function(t){t.preventDefault(),y.erpPopup({title:wpErpHr.popup.holiday_import,button:wpErpHr.popup.import,id:"erp-hr-holiday-create-popup",content:wperp.template("erp-hr-holiday-import")({data:null}).trim(),extraClass:"small",onReady:function(){w.initDateField(),w.holiday.checkRange()},onSubmit:function(e){t.data.holiday.submit.call(this,e,"import")}})},parseInputArray:function(e,t){return e.find(t).map(function(){return y(this).val()}).get()}},policy:{remove:function(e){e.preventDefault();var t=y(this);swal({title:"",text:wpErpHr.delConfirmPolicy,type:"warning",showCancelButton:!0,cancelButtonText:wpErpHr.cancel,confirmButtonColor:"#fa6e5c",confirmButtonText:wpErpHr.confirm_delete,closeOnConfirm:!0},function(){wp.ajax.send("erp-hr-leave-policy-delete",{data:{_wpnonce:wpErpHr.nonce,id:t.data("id")},success:function(e){swal({title:"",text:e,type:"success",timer:2200,showConfirmButton:!1}),t.closest("tr").fadeOut("fast",function(){y(this).remove()})},error:function(e){swal("",e,"error")}})})}},entitlement:{remove:function(e){e.preventDefault();var t=y(this);confirm(wpErpHr.delConfirmEntitlement)&&wp.ajax.send("erp-hr-leave-entitlement-delete",{data:{_wpnonce:wpErpHr.nonce,id:t.data("id"),user_id:t.data("user_id"),policy_id:t.data("policy_id")},success:function(){t.closest("tr").fadeOut("fast",function(){y(this).remove()})},error:function(e){alert(e)}})},hideEmployee:function(e){e.preventDefault(),y(this).is(":checked")?y(".single_employee_field").hide():y(".single_employee_field").show()},getLeavePolicies:function(){y(".leave-entitlement-form .leave_policy").find("option").remove(),y(".leave-entitlement-form .leave_policy").prop("disabled",!0);var e=y(".leave-entitlement-form .department_id").select2("data"),t=y(".leave-entitlement-form .designation_id").select2("data"),a=y(".leave-entitlement-form .location_id").select2("data"),r=y(".leave-entitlement-form .gender").select2("data"),i=y(".leave-entitlement-form .marital").select2("data"),n=y(".leave-entitlement-form .f_year").select2("data"),o=y(".leave-entitlement-form .employee_type").select2("data");void 0!==n&&""!=n[0].id&&wp.ajax.send("erp-hr-leave-get-policies",{data:{_wpnonce:wpErpHr.nonce,employee_type:o[0].id,department_id:e[0].id,designation_id:t[0].id,location_id:a[0].id,gender:r[0].id,marital:i[0].id,f_year:n[0].id},success:function(e){var r=y(".leave-entitlement-form .leave_policy");r.find("option").remove(),y.each(e,function(e,t){var a=new Option(t,e);r.append(a)}),r.trigger("change"),r.prop("disabled",!1)},error:function(e){console.log(e)}})},getFilteredEmployee:function(){var e=y(".leave-entitlement-form #leave_policy").val();y(".leave-entitlement-form .single_employee").prop("disabled",!0),void 0!==e&&0!=e&&""!=e&&wp.ajax.send("erp-hr-leave-get-employees",{data:{_wpnonce:wpErpHr.nonce,policy_id:e},success:function(e){var r=y(".leave-entitlement-form .single_employee");r.find("option").remove(),y.each(e,function(e,t){var a=new Option(t,e);r.append(a)}),r.trigger("change"),r.prop("disabled",!1)},error:function(e){console.log(e)}})}},leave:{takeLeave:function(e){e.preventDefault(),y.erpPopup({title:wpErpHr.popup.new_leave_req,button:wpErpHr.popup.take_leave,id:"erp-hr-new-leave-req-popup",content:wp.template("erp-new-leave-req")().trim(),extraClass:"smaller",onReady:function(){w.initDateField()},onSubmit:function(t){y("button[type=submit]",".erp-modal").attr("disabled","disabled");var e=y("#erp-hr-new-leave-req-popup .erp-modal-form")[0],a=new FormData(e);y.ajax({type:"POST",enctype:"multipart/form-data",url:ajaxurl,data:a,processData:!1,contentType:!1,cache:!1,timeout:6e5,success:function(e){t.enableButton(),alert(e.data),t.closeModal()},error:function(e){t.enableButton(),t.showError(e)}})}}),w.leave.setPolicy()},requestDates:function(e){var t=y("#erp-hr-leave-req-from-date").val(),a=y("#erp-hr-leave-req-to-date").val(),r=y(this).closest("form").find('*[type="submit"]'),i=parseInt(y("#erp-hr-leave-req-employee-id").val()),n=y("#erp-hr-leave-req-leave-policy").val(),o=y("#halfday"),l=!1;"undefined"!==o.val()&&o.is(":checked")&&(l=!0,"leave_to"===e.target.name)||""!==t&&""!==a&&wp.ajax.send("erp-hr-leave-request-req-date",{data:{_wpnonce:wpErpHr.nonce,from:t,to:a,employee_id:i,type:n},success:function(e){var t=wp.template("erp-leave-days")(e.print);!0===l&&"0"!=e.leave_count&&(t=""),y("div.erp-hr-leave-req-show-days").html(t),parseInt(e.leave_count)<=0?r.prop("disabled",!0):r.prop("disabled",!1)},error:function(e){y("div.erp-hr-leave-req-show-days").empty(),r.attr("disabled","disable"),void 0!==e&&alert(e)}})},setPolicy:function(){w.leave.resetDateRange();y(this);var t=y("div.erp-hr-leave-reqs-wrap"),a=t.find(".erp-hr-leave-type-wrapper");if(a.html(""),0!=y("#erp-hr-leave-req-employee-id").val()){var e=y(".f_year").val();0!=e&&void 0!==e&&wp.ajax.send("erp-hr-leave-employee-assign-policies",{data:{_wpnonce:wpErpHr.nonce,employee_id:y("#erp-hr-leave-req-employee-id").val(),f_year:e},success:function(e){a.html(e).hide().fadeIn(),t.find('input[type="text"], textarea').removeAttr("disabled")},error:function(e){a.html('<div class="notice error"><p>'+e+"</p></div>").hide().fadeIn()}})}},setAvailableDays:function(){w.leave.resetDateRange();var t=y(this);wp.ajax.send("erp-hr-leave-policies-availablity",{data:{_wpnonce:wpErpHr.nonce,employee_id:y("#erp-hr-leave-req-employee-id").val(),policy_id:t.val()},success:function(e){t.closest("div.row").find("span.description").remove(),y(e).insertAfter(t)},error:function(e){alert(e)}})},resetDateRange:function(){y("#erp-hr-leave-req-from-date").val(""),y("#erp-hr-leave-req-to-date").val(""),y("div.erp-hr-leave-req-show-days").html("")},showHistory:function(e){e.preventDefault();var t=y(this);wp.ajax.send("erp-hr-empl-leave-history",{data:t.serializeObject(),success:function(e){y("table#erp-hr-empl-leave-history-table tbody").html(e)}})},approve:function(e){e.preventDefault();var t={id:y(this).data("id")};y.erpPopup({title:wpErpHr.popup.leave_approve,button:wpErpHr.popup.leave_approve_btn,id:"erp-hr-leave-approve-popup",content:wperp.template("erp-hr-leave-approve-js-tmp")(t).trim(),extraClass:"smaller",onSubmit:function(t){wp.ajax.send({data:this.serialize()+"&_wpnonce="+wpErpHr.nonce,success:function(e){var a="";if(e.errors)y.each(e.errors,function(e,t){a+='<div class="notice notice-error is-dismissible"><p>'+t[0]+"</p></div>"}),""!=a&&y("#leave-approve-form-error").html(a);else if(e.redirect){var r=window.location.origin+window.location.pathname+"?1=1";y.each(e.redirect,function(e,t){r+="&"+e+"="+t}),window.location.replace(r)}else{r=window.location.origin+window.location.pathname+"?page=erp-hr&section=leave&status=1";window.location.replace(r)}},error:function(e){t.showError(e)}})}})},reject:function(e){e.preventDefault();var t={id:y(this).data("id")};y.erpPopup({title:wpErpHr.popup.leave_reject,button:wpErpHr.popup.leave_reject_btn,id:"erp-hr-leave-reject-popup",content:wperp.template("erp-hr-leave-reject-js-tmp")(t).trim(),extraClass:"smaller",onSubmit:function(t){wp.ajax.send({data:this.serialize()+"&_wpnonce="+wpErpHr.nonce,success:function(e){var a="";if(e.errors)y.each(e.errors,function(e,t){a+='<div class="notice notice-error is-dismissible"><p>'+t[0]+"</p></div>"}),""!=a&&y("#leave-reject-form-error").html(a);else if(e.redirect){var r=window.location.origin+window.location.pathname+"?1=1";y.each(e.redirect,function(e,t){r+="&"+e+"="+t}),window.location.replace(r)}else{r=window.location.origin+window.location.pathname+"?page=erp-hr&section=leave&status=3";window.location.replace(r)}},error:function(e){t.showError(e)}})}})},remove:function(e){e.preventDefault();var t=y(this);confirm(wpErpHr.delConfirmRequest)&&wp.ajax.send("erp-hr-leave-request-delete",{data:{_wpnonce:wpErpHr.nonce,id:t.data("id")},success:function(){t.closest("tr").fadeOut("fast",function(){y(this).remove()})},error:function(e){alert(e)}})}},leaveType:{initActions:function(){y(".erp-hr-leave-type-delete").on("click",w.leaveType.remove),y(".erp-hr-leave-type-edit").on("click",w.leaveType.edit),y("#erp-hr-leave-type-table-form").on("submit",w.leaveType.bulkAction)},reloadTable:function(){y("#col-right").load(window.location.href+" #col-right .list-table-wrap",function(){w.leaveType.initActions()})},resetForm:function(){var e=y("#erp-hr-leave-type-create")[0];e.name.value="",e.description.value="",e["policy-name-id"].value=0,e.submit.value="Save"},create:function(e){e.preventDefault();var t=e.target,a={id:t["policy-name-id"].value,name:t.name.value,description:t.description.value,_wpnonce:wpErpHr.nonce};y(".erp-loader").css("display","block"),wp.ajax.send("erp-hr-leave-type-create",{data:a,success:function(e){y(".erp-loader").css("display","none"),swal({title:"",text:e,type:"success",timer:2200,showConfirmButton:!1}),w.leaveType.reloadTable(),w.leaveType.resetForm()},error:function(e){y(".erp-loader").css("display","none"),swal("",e,"error")}})},edit:function(e){e.preventDefault();var a=y(this).data("id");wp.ajax.send("erp-hr-get-leave-type",{data:{id:a,_wpnonce:wpErpHr.nonce},success:function(e){var t=y("#erp-hr-leave-type-create")[0];void 0!==t&&(t["policy-name-id"].value=a,t.name.value=e.name,t.description.value=e.description,t.submit.value=wpErpHr.popup.update_status)},error:function(e){swal("",e,"error")}})},remove:function(e){e.preventDefault(),w.leaveType.resetForm();var t=y(this);swal({title:"",text:wpErpHr.leave_type_delete,type:"warning",showCancelButton:!0,cancelButtonText:wpErpHr.cancel,confirmButtonColor:"#fa6e5c",confirmButtonText:wpErpHr.confirm_delete,closeOnConfirm:!1},function(){wp.ajax.send("erp-hr-leave-type-delete",{data:{_wpnonce:wpErpHr.nonce,id:t.data("id")},success:function(e){t.closest("tr").fadeOut("fast",function(){y(this).remove()}),swal({title:"",text:e,type:"success",timer:2200,showConfirmButton:!1})},error:function(e){swal("",e,"error")}})})},bulkAction:function(e){e.preventDefault();var t=e.target;if("delete"===t.action.value||"delete"===t.action2.value){for(var a=t["ids[]"],r=[],i=0;i<a.length;i++)a[i].checked&&r.push(a[i].value);0!==r.length&&swal({title:"",text:wpErpHr.leave_type_bulk_delete,type:"warning",showCancelButton:!0,cancelButtonText:wpErpHr.cancel,confirmButtonColor:"#fa6e5c",confirmButtonText:wpErpHr.confirmDelete,closeOnConfirm:!1},function(){wp.ajax.send("erp-hr-leave-type-bulk-delete",{data:{_wpnonce:wpErpHr.nonce,ids:r},success:function(e){w.leaveType.reloadTable(),swal({title:"",text:e,type:"success",timer:2200,showConfirmButton:!1})},error:function(e){swal("",e,"error")}})})}}},importICalInit:function(e){e.preventDefault(),y("body #erp-ical-input").trigger("click")},uploadICal:function(e){e.preventDefault();var t=e.target.files[0],a=new FormData,r=y(this).parents("form");a.append("ics",t),a.append("action","erp-hr-import-ical"),a.append("_wpnonce",wpErpHr.nonce),wp.ajax.send({data:a,cache:!1,processData:!1,contentType:!1,beforeSend:function(){y("#erp-holiday-uploading").show()},success:function(e){var a="";e&&e.length&&"object"==typeof e?(e.forEach(function(e,t){a+='<tr data-id="'+t+'"><td><input readonly onfocus="this.blur()" type="text" name="title[]" value="'+e.title+'"/></td><td><input readonly onfocus="this.blur()" type="text" name="start[]" class="erp-leave-datetime-picker-from" value="'+e.start+'"/></td><td><input readonly onfocus="this.blur()" type="text" name="end[]" class="erp-leave-datetime-picker-to" value="'+e.end+'"/></td><td id="duration-'+t+'">'+e.duration+'</td></tr><input type="hidden" name="description[]" value="'+e.description+'"/>'}),y("#holiday-import-hint").html("** "+wpErpHr.import_hint),y("#erp-hr-holiday-data thead").show()):(a+='<tr><td colspan="4">'+e+"</td></tr>",y("#holiday-import-hint").html(""),y("#erp-hr-holiday-data thead").hide()),y("#erp-hr-holiday-data tbody").html(a),w.initDateField(),r[0].reset(),y("#erp-holiday-uploading").hide()},error:function(e){r[0].reset(),alert(e),y("#erp-holiday-uploading").hide()}})},customFilterLeaveReport:function(){if("custom"!=this.value)y("#custom-input").remove();else{y("#custom-date-range").after('<span id="custom-input" style="float:left"><span>From </span><input name="start" class="erp-leave-date-field" type="text">&nbsp;<span>To </span><input name="end" class="erp-leave-date-field" type="text"></span>')}w.initDateField()},customLeaveFilter:function(){if(document.getElementById("filter_employee_search").disabled=!1,"custom"!==this.value)y("#custom-input").remove();else{y("#custom-date-range-leave-filter").append('<div class="input-component" id="custom-input" style="display: flex; justify-content: space-between;"><div style="display: flex"><label for="start_date">From <input autocomplete="off" name="start_date" id="start_date" class="erp-leave-date-field" type="text" required>&nbsp;</div><div><label for="end_date">To <input autocomplete="off" name="end_date" id="end_date" class="erp-leave-date-field" type="text" required> </div></div>')}w.initDateField()},customLeaveFilterEndData:function(){var e=new Date(y("#start_date").val()),t=new Date(y("#end_date").val());Date.parse(e)>Date.parse(t)?(alert("Invalid Date Range"),y("#filter_employee_search").attr("disabled","disable")):document.getElementById("filter_employee_search").disabled=!1},setLeavePolicy:function(e){e.preventDefault();var t=y("#financial_year").val();y("#leave_policy option").remove();var a=new Option("All Policy","");y("#leave_policy").append(a),wpErpLeavePolicies[t]&&y.each(wpErpLeavePolicies[t],function(e,t){var a=new Option(t.name,t.policy_id);y("#leave_policy").append(a)})},setEmployee:function(e){e.preventDefault(),y("#employee_name").val(y(this).data("employee_full_name")),y("#live-search").addClass("hidden")},searchEmployee:function(e){var t=y("#employee_name").val();y("#live-search").remove(),t.length<3||wp.ajax.send("search_live_employee",{data:{_wpnonce:wpErpHr.nonce,employee_name:t},success:function(e){for(var t='<ul id="live-search"> ',a=0;a<e.length;a++){var r=e[a].work.designation?e[a].work.designation.title:"";t+='<li><span class="employee_name"><div class="list-main">'+e[a].avatar.image+'<div class="list-employee-name" data-employee_full_name="'+e[a].name.full_name+'">'+e[a].name.full_name+'<div class="list-employee-designation">'+r+"</div></div></div></span></li> "}t+="</ul> ",y("#live-employee-search").append(t)},error:function(e){y("#live-search").remove();var t='<ul id="live-search"> ';t+='<li><span class="employee_name"><div class="list-main"><div class="list-employee-name">'+e.data+'<div class="list-employee-designation"></div></div></div></span></li> ',t+="</ul> ",y("#live-employee-search").append(t)}})},checkDateRange:function(){var e=new Date(this.value).getFullYear();(new Date).getFullYear()<e&&(alert("Enter date range between current year"),this.value="")}};y(function(){w.initialize()})}(jQuery);